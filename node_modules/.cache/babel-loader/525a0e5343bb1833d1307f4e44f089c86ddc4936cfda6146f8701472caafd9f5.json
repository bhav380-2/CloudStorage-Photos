{"ast":null,"code":"var _jsxFileName = \"/home/codex/skills/webDev/react/project/photofolio/photos/src/components/ImagesList.js\",\n  _s = $RefreshSig$();\n// import components, hooks, toastify, progressbar, firebase\nimport ImagesForm from \"./ImagesForm\";\nimport Carousel from \"./Carousel\";\nimport { useEffect, useReducer, useState } from \"react\";\nimport { db } from \"../firebaseInit\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { ProgressBar } from \"react-loader-spinner\";\nimport { doc, onSnapshot, setDoc, updateDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ImagesList({\n  newimageDetails,\n  setNewimageDetails,\n  currentAlbum,\n  setCurrentAlbum\n}) {\n  _s();\n  // use state for handling the toggling of the form, existence of the carousel and loading spinner\n  const [showImagesForm, setShowImagesForm] = useState(false);\n  const [imgCarousel, setImgCarousel] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  // use reducer for handling the state of imagesDetail array which contains the image details of new or edited img\n  const [imagesDetail, dispatch] = useReducer(reducer, []);\n\n  // reducer func to add or get or update img details \n  function reducer(state, action) {\n    const {\n      payload\n    } = action;\n    switch (action.type) {\n      case \"ADD\":\n        {\n          return [...state, payload.data];\n        }\n      case \"GET\":\n        {\n          payload.setIsLoading(false);\n          return payload.data;\n        }\n      case \"UPDATE\":\n        return payload.data;\n      default:\n        return state;\n    }\n  }\n\n  // use effect to fetch images of selected album on page load \n  useEffect(() => {\n    onSnapshot(doc(db, \"albums\", currentAlbum), doc => {\n      dispatch({\n        type: \"GET\",\n        payload: {\n          data: doc.data() ? doc.data().imagesInfo : [],\n          setIsLoading: setIsLoading\n        }\n      });\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // func to add an img if not already present to the db and the array\n  const addImage = data => {\n    let add = true;\n    for (let i = 0; i < imagesDetail.length; i++) {\n      if (imagesDetail[i].imgTitle === data.imgTitle) {\n        add = false;\n        toast.error(\"Image Already Exists\");\n        return;\n      }\n    }\n    if (add) {\n      async function addI() {\n        await setDoc(doc(db, \"albums\", currentAlbum), {\n          imagesInfo: [data, ...imagesDetail]\n        });\n      }\n      addI();\n      dispatch({\n        type: \"ADD\",\n        payload: {\n          data\n        }\n      });\n      toast.success(\"Image Added Successfully\");\n      setShowImagesForm(!showImagesForm);\n    }\n  };\n\n  // show the form if not present and set the state with new details for edited img\n  const editImage = img => {\n    if (!showImagesForm) {\n      setShowImagesForm(true);\n    }\n    let data = [...imagesDetail];\n    let index = data.indexOf(img);\n    setNewimageDetails({\n      imgData: img,\n      id: currentAlbum,\n      data,\n      index\n    });\n  };\n\n  // delete the img user want to be deleted\n  const deleteImage = index => {\n    let data = [...imagesDetail];\n    data.splice(index, 1);\n    async function deleteI() {\n      await updateDoc(doc(db, \"albums\", currentAlbum), {\n        imagesInfo: data\n      });\n    }\n    deleteI();\n    toast.success(\"Image Deleted Successfully !\");\n  };\n\n  // check if the url entered is active/valid if yes proceed\n  const handleError = data => {\n    let index = imagesDetail.indexOf(data);\n    let temp = [...imagesDetail];\n    temp.splice(index, 1);\n    async function errorI() {\n      await updateDoc(doc(db, \"albums\", currentAlbum), {\n        imagesInfo: temp\n      });\n    }\n    errorI();\n    toast.error(`${data.imgTitle} image link changes or become invalid`);\n  };\n\n  // download the img\n  const handleDownload = async (imgTitle, imgUrl) => {\n    await fetch(imgUrl, {\n      method: \"GET\",\n      headers: {}\n    }).then(response => {\n      response.arrayBuffer().then(buffer => {\n        const url = window.URL.createObjectURL(new Blob([buffer]));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", `${imgTitle}.png`);\n        document.body.appendChild(link);\n        link.click();\n      });\n    }).catch(() => {\n      toast.error(\"Image has been blocked by CORS policy\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"images-list\",\n    children: [showImagesForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cancel-btn\",\n        type: \"button\",\n        onClick: () => {\n          setShowImagesForm(!showImagesForm);\n          setNewimageDetails(null);\n        },\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"add-btn\",\n      type: \"button\",\n      onClick: () => {\n        setShowImagesForm(!showImagesForm);\n      },\n      children: \"Add Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa-solid fa-arrow-left\",\n        onClick: () => {\n          setCurrentAlbum(null);\n          setNewimageDetails(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Images from \", currentAlbum, \" Album\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), showImagesForm ? /*#__PURE__*/_jsxDEV(ImagesForm, {\n      addImage: addImage,\n      newimageDetails: newimageDetails,\n      setNewimageDetails: setNewimageDetails,\n      showImagesForm: showImagesForm,\n      setShowImagesForm: setShowImagesForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this) : null, isLoading ? /*#__PURE__*/_jsxDEV(ProgressBar, {\n      height: \"80\",\n      width: \"80\",\n      ariaLabel: \"progress-bar-loading\",\n      wrapperClass: \"progress-bar-wrapper\",\n      borderColor: \"grey\",\n      barColor: \"dodgerblue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this) : imagesDetail.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"images-container\",\n      children: imagesDetail.map((img, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"images-div\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: img.imgUrl,\n          alt: img.imgTitle,\n          onClick: () => setImgCarousel(i),\n          onError: () => handleError(img)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: img.imgTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: img.imgUrl,\n          className: \"dwnld-btn\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          onClick: e => {\n            e.stopPropagation();\n            handleDownload(img.imgTitle, img.imgUrl);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-solid fa-download\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"edit-btn fa-regular fa-pen-to-square\",\n          onClick: e => {\n            e.stopPropagation();\n            editImage(img);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"delete-btn fa-regular fa-trash-can\",\n          onClick: e => {\n            e.stopPropagation();\n            deleteImage(e, i);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"no-image-h2\",\n      children: \"No Images Found ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }, this), imgCarousel === null ? null : /*#__PURE__*/_jsxDEV(Carousel, {\n      imagesDetail: imagesDetail,\n      i: imgCarousel,\n      setImgCarousel: setImgCarousel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n_s(ImagesList, \"bNYVIV/3HaFPpfvndEfZjGiug48=\");\n_c = ImagesList;\nexport default ImagesList;\nvar _c;\n$RefreshReg$(_c, \"ImagesList\");","map":{"version":3,"names":["ImagesForm","Carousel","useEffect","useReducer","useState","db","toast","ProgressBar","doc","onSnapshot","setDoc","updateDoc","jsxDEV","_jsxDEV","Fragment","_Fragment","ImagesList","newimageDetails","setNewimageDetails","currentAlbum","setCurrentAlbum","_s","showImagesForm","setShowImagesForm","imgCarousel","setImgCarousel","isLoading","setIsLoading","imagesDetail","dispatch","reducer","state","action","payload","type","data","imagesInfo","addImage","add","i","length","imgTitle","error","addI","success","editImage","img","index","indexOf","imgData","id","deleteImage","splice","deleteI","handleError","temp","errorI","handleDownload","imgUrl","fetch","method","headers","then","response","arrayBuffer","buffer","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","catch","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","height","width","ariaLabel","wrapperClass","borderColor","barColor","map","src","alt","onError","target","rel","e","stopPropagation","_c","$RefreshReg$"],"sources":["/home/codex/skills/webDev/react/project/photofolio/photos/src/components/ImagesList.js"],"sourcesContent":["// import components, hooks, toastify, progressbar, firebase\nimport ImagesForm from \"./ImagesForm\";\nimport Carousel from \"./Carousel\";\nimport { useEffect, useReducer, useState } from \"react\";\nimport { db } from \"../firebaseInit\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { ProgressBar } from \"react-loader-spinner\";\nimport { doc, onSnapshot, setDoc, updateDoc } from \"firebase/firestore\";\n\nfunction ImagesList({ newimageDetails, setNewimageDetails, currentAlbum, setCurrentAlbum }) {\n  // use state for handling the toggling of the form, existence of the carousel and loading spinner\n  const [showImagesForm, setShowImagesForm] = useState(false);\n  const [imgCarousel, setImgCarousel] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  // use reducer for handling the state of imagesDetail array which contains the image details of new or edited img\n  const [imagesDetail, dispatch] = useReducer(reducer, []);\n\n  // reducer func to add or get or update img details \n  function reducer(state, action) {\n    const { payload } = action;\n    switch (action.type) {\n      case \"ADD\": {\n        return [...state, payload.data];\n      }\n      case \"GET\": {\n        payload.setIsLoading(false);\n        return payload.data;\n      }\n      case \"UPDATE\":\n        return payload.data;\n      default:\n        return state;\n    }\n  }\n\n  // use effect to fetch images of selected album on page load \n  useEffect(() => {\n    onSnapshot(doc(db, \"albums\", currentAlbum), (doc) => {\n      dispatch({ type: \"GET\", payload: { data: doc.data() ? doc.data().imagesInfo : [], setIsLoading: setIsLoading } });\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // func to add an img if not already present to the db and the array\n  const addImage = (data) => {\n    let add = true;\n    for (let i = 0; i < imagesDetail.length; i++) {\n      if (imagesDetail[i].imgTitle === data.imgTitle) {\n        add = false;\n        toast.error(\"Image Already Exists\");\n        return\n      }\n    }\n    if (add) {\n      async function addI() {\n        await setDoc(doc(db, \"albums\", currentAlbum), {\n          imagesInfo: [data, ...imagesDetail]\n        });\n      }\n      addI();\n      dispatch({ type: \"ADD\", payload: { data } });\n      toast.success(\"Image Added Successfully\");\n      setShowImagesForm(!showImagesForm);\n    }\n  }\n\n  // show the form if not present and set the state with new details for edited img\n  const editImage = (img) => {\n    if (!showImagesForm) {\n      setShowImagesForm(true);\n    }\n    let data = [...imagesDetail];\n    let index = data.indexOf(img);\n    setNewimageDetails({ imgData: img, id: currentAlbum, data, index });\n  }\n\n  // delete the img user want to be deleted\n  const deleteImage = (index) => {\n    let data = [...imagesDetail];\n    data.splice(index, 1);\n    async function deleteI() {\n      await updateDoc(doc(db, \"albums\", currentAlbum), {\n        imagesInfo: data\n      });\n    }\n    deleteI();\n    toast.success(\"Image Deleted Successfully !\");\n  }\n\n  // check if the url entered is active/valid if yes proceed\n  const handleError = (data) => {\n    let index = imagesDetail.indexOf(data);\n    let temp = [...imagesDetail]\n    temp.splice(index, 1);\n    async function errorI() {\n      await updateDoc(doc(db, \"albums\", currentAlbum), {\n        imagesInfo: temp\n      });\n    }\n    errorI();\n    toast.error(`${data.imgTitle} image link changes or become invalid`);\n  }\n\n  // download the img\n  const handleDownload = async (imgTitle, imgUrl) => {\n    await fetch(imgUrl, {\n      method: \"GET\",\n      headers: {}\n    }).then((response) => {\n      response.arrayBuffer().then((buffer) => {\n        const url = window.URL.createObjectURL(new Blob([buffer]));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", `${imgTitle}.png`);\n        document.body.appendChild(link);\n        link.click();\n      })\n    }).catch(() => {\n      toast.error(\"Image has been blocked by CORS policy\");\n    });\n  }\n\n  return (\n    <div className=\"images-list\">\n      {showImagesForm ?\n        <>\n          <button className=\"cancel-btn\" type=\"button\" onClick={() => { setShowImagesForm(!showImagesForm); setNewimageDetails(null); }}>Cancel</button>\n        </>\n        :\n        <button className=\"add-btn\" type=\"button\" onClick={() => { setShowImagesForm(!showImagesForm); }}>Add Image</button>\n      }\n      <div className=\"header\">\n        <i className=\"fa-solid fa-arrow-left\" onClick={() => { setCurrentAlbum(null); setNewimageDetails(null) }}></i>\n        <h2>Images from {currentAlbum} Album</h2>\n      </div>\n      {showImagesForm ? (\n        <ImagesForm\n          addImage={addImage}\n          newimageDetails={newimageDetails}\n          setNewimageDetails={setNewimageDetails}\n          showImagesForm={showImagesForm}\n          setShowImagesForm={setShowImagesForm}\n        />\n      ) : null}\n      {isLoading ?\n        <ProgressBar\n          height=\"80\"\n          width=\"80\"\n          ariaLabel=\"progress-bar-loading\"\n          wrapperClass=\"progress-bar-wrapper\"\n          borderColor=\"grey\"\n          barColor='dodgerblue'\n        />\n        :\n        imagesDetail.length ?\n          <div className=\"images-container\">\n            {imagesDetail.map((img, i) => (\n              <div className=\"images-div\" key={i}>\n                <img src={img.imgUrl} alt={img.imgTitle} onClick={() => setImgCarousel(i)} onError={() => handleError(img)} />\n                <h3>{img.imgTitle}</h3>\n                <a href={img.imgUrl} className=\"dwnld-btn\" target=\"_blank\" rel=\"noopener noreferrer\" onClick={(e) => { e.stopPropagation(); handleDownload(img.imgTitle, img.imgUrl); }}>\n                  <i className=\"fa-solid fa-download\"></i>\n                </a>\n                <i className=\"edit-btn fa-regular fa-pen-to-square\" onClick={(e) => { e.stopPropagation(); editImage(img); }}></i>\n                <i className=\"delete-btn fa-regular fa-trash-can\" onClick={(e) => { e.stopPropagation(); deleteImage(e, i); }}></i>\n              </div>\n            ))}\n          </div>\n          :\n          <h2 className=\"no-image-h2\">No Images Found ...</h2>\n      }\n      {imgCarousel === null ?\n        null\n        :\n        <Carousel\n          imagesDetail={imagesDetail}\n          i={imgCarousel}\n          setImgCarousel={setImgCarousel}\n        />\n      }\n    </div>\n  );\n}\n\nexport default ImagesList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}